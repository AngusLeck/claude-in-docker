#!/bin/bash
# claude-docker-global - Run Claude in global/workspace mode
# Long-running container with persistent workspace

set -e

source "$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)/lib/script-dir.sh"
source "$SCRIPT_DIR/lib/flags.sh"
source "$SCRIPT_DIR/lib/container.sh"

CONTAINER_NAME="claude-dev-env"

parse_mode_flags "$@"
set -- "${REMAINING_ARGS[@]}"

cd "$SCRIPT_DIR"

# Ensure container is running
if ! container_running; then
    echo "Starting global Claude container..."
    docker-compose up -d
    sleep 2
fi

run_in_container "$@"
